# cpulimit

В этой задаче вам предлагается написать программу `cpulimit`, которая позволяет ограничить использование CPU данным процессом. Это будет простой аналог программы `cpulimit` из Ubuntu, которая описана [здесь](https://manpages.ubuntu.com/manpages/focal/en/man1/cpulimit.1.html).

Основная идея в том, что мы часто (например, несколько раз в секунду) посылаем процессу сигналы `SIGSTOP` и `SIGCONT`, чтобы в единицу времени этот процесс не мог использовать слишком много процессорного времени. Понять, сколько уже CPU использовал процесс в эту секунду, можно с помощью файлов в директории `/proc` (как вы уже делали это в задаче [top](../top/readme.md)).

Например, если мы хотим ограничить использование CPU $20$ процентами, то мы можем послать `SIGSTOP` процессу, как только увидим, что его CPU usage в эту секунду приблизилось к $200$ ms. После чего послать ему сигнал `SIGCONT` лишь по истечении текущей секунды времени.

Чтобы подождать нужное количество времени до следующего действия, используйте функцию `sleep(3)` или напрямую сисколл `nanosleep(2)`.

Когда мы говорим об использовании CPU в процентах, то имеется в виду, что $100$ процентов означает полную загрузку одного ядра CPU. Так что на $8$-ядерном процессоре максимальная загрузка CPU, например, может быть $800$ процентов. Программа `cpulimit` должна это учитывать. То есть, например, ограничение в $50$ процентов на $8$-ядерном процессоре означает, что суммарно за секунду процесс должен использовать не более $/frac{1}{16}$ вычислительной мощности всех ядер.

Ваша программа должна поддерживать флаги `-p` и `-e`. 

- флаг `-p` означает, что нужно ограничить использование CPU конкретным pid. Например:
    ```bash
    cpulimit -p 1234 -l 50
    ```

- флаг `-e` означает, что нужно ограничить суммарное использование cpu всеми процессами, у которых имя исполняемого файла такое, как передано. Например:
    ```bash
    cpulimit -e firefox -l 50
    ```
    означает, что все процессы с именем `firefox` имеют право суммарно загружать CPU лишь на $50$ процентов (в смысле, описанном выше). Это должно распространиться на все процессы, которые порождены браузером `firefox`.
